#!/usr/bin/env bash

calc() { awk "BEGIN{print $*}"; }

############################################################################################################################
############################################################################################################################
############################################################################################################################

# GENERAL SETTINGS
# 97500 (65 packets) or 30000 (20 packets)
ecn_threshold=30000
num_flows=3000000
intermediary=uniform
FLOWLET_GAP_NS=50000
traffic_flow_size_dist=pareto
hybrid_threshold_bytes=100000
k_for_k_shortest_paths=8

# 40 servers (5x8, 8x5)
flows_per_s=750000
actservers=40
a2a_fraction_ft=0.04
a2a_fraction_xp=0.04
runtime=`calc ${num_flows} / ${flows_per_s}`;

#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/full_fat_tree_k16.properties run_folder_name=15_pareto_a2a_fraction/full_fat_tree_k16_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_ft}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_vlb.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_vlb_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ecmp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ecmp_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 routing_ecmp_then_valiant_switch_threshold_bytes=${hybrid_threshold_bytes} traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths} routing_ecmp_then_source_routing_switch_threshold_bytes=${hybrid_threshold_bytes}"

echo "Increasing a2a fraction deployment (${flows_per_s}) finished."

# 80 servers (10x8, 16x5)
flows_per_s=750000
actservers=80
a2a_fraction_ft=0.08
a2a_fraction_xp=0.075
runtime=`calc ${num_flows} / ${flows_per_s}`;

#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/full_fat_tree_k16.properties run_folder_name=15_pareto_a2a_fraction/full_fat_tree_k16_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_ft}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_vlb.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_vlb_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ecmp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ecmp_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 routing_ecmp_then_valiant_switch_threshold_bytes=${hybrid_threshold_bytes} traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths} routing_ecmp_then_source_routing_switch_threshold_bytes=${hybrid_threshold_bytes}"

echo "Increasing a2a fraction deployment (${flows_per_s}) finished."

# 120 servers (15x8, 24x5)
flows_per_s=750000
actservers=120
a2a_fraction_ft=0.12
a2a_fraction_xp=0.1112
runtime=`calc ${num_flows} / ${flows_per_s}`;

#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/full_fat_tree_k16.properties run_folder_name=15_pareto_a2a_fraction/full_fat_tree_k16_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_ft}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_vlb.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_vlb_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ecmp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ecmp_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 routing_ecmp_then_valiant_switch_threshold_bytes=${hybrid_threshold_bytes} traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths} routing_ecmp_then_source_routing_switch_threshold_bytes=${hybrid_threshold_bytes}"

echo "Increasing a2a fraction deployment (${flows_per_s}) finished."

# 240 servers (30x8, 48x5)
flows_per_s=750000
actservers=240
a2a_fraction_ft=0.24
a2a_fraction_xp=0.2223
runtime=`calc ${num_flows} / ${flows_per_s}`;

#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/full_fat_tree_k16.properties run_folder_name=15_pareto_a2a_fraction/full_fat_tree_k16_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_ft}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_vlb.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_vlb_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ecmp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ecmp_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 routing_ecmp_then_valiant_switch_threshold_bytes=${hybrid_threshold_bytes} traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths} routing_ecmp_then_source_routing_switch_threshold_bytes=${hybrid_threshold_bytes}"

echo "Increasing a2a fraction deployment (${flows_per_s}) finished."

# 360 servers (45x8, 72x5)
flows_per_s=750000
actservers=360
a2a_fraction_ft=0.355
a2a_fraction_xp=0.3334
runtime=`calc ${num_flows} / ${flows_per_s}`;


#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/full_fat_tree_k16.properties run_folder_name=15_pareto_a2a_fraction/full_fat_tree_k16_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_ft}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_vlb.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_vlb_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ecmp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ecmp_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 routing_ecmp_then_valiant_switch_threshold_bytes=${hybrid_threshold_bytes} traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths} routing_ecmp_then_source_routing_switch_threshold_bytes=${hybrid_threshold_bytes}"

echo "Increasing a2a fraction deployment (${flows_per_s}) finished."

# 480 servers (60x8, 96x5)
flows_per_s=750000
actservers=480
a2a_fraction_ft=0.47
a2a_fraction_xp=0.4445
runtime=`calc ${num_flows} / ${flows_per_s}`;

#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/full_fat_tree_k16.properties run_folder_name=15_pareto_a2a_fraction/full_fat_tree_k16_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_ft}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_vlb.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_vlb_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ecmp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ecmp_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 routing_ecmp_then_valiant_switch_threshold_bytes=${hybrid_threshold_bytes} traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths} routing_ecmp_then_source_routing_switch_threshold_bytes=${hybrid_threshold_bytes}"

echo "Increasing a2a fraction deployment (${flows_per_s}) finished."

# 600 servers (75x8, 120x5)
flows_per_s=750000
actservers=600
a2a_fraction_ft=0.59
a2a_fraction_xp=0.5556
runtime=`calc ${num_flows} / ${flows_per_s}`;

ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/full_fat_tree_k16.properties run_folder_name=15_pareto_a2a_fraction/full_fat_tree_k16_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_ft}"
ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_vlb.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_vlb_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ecmp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ecmp_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 routing_ecmp_then_valiant_switch_threshold_bytes=${hybrid_threshold_bytes} traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths} routing_ecmp_then_source_routing_switch_threshold_bytes=${hybrid_threshold_bytes}"

echo "Increasing a2a fraction deployment (${flows_per_s}) finished."

# 720 servers (75x8, 120x5)
flows_per_s=750000
actservers=720
a2a_fraction_ft=0.71
a2a_fraction_xp=0.6667
runtime=`calc ${num_flows} / ${flows_per_s}`;

#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/full_fat_tree_k16.properties run_folder_name=15_pareto_a2a_fraction/full_fat_tree_k16_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_ft}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_vlb.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_vlb_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ecmp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ecmp_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 routing_ecmp_then_valiant_switch_threshold_bytes=${hybrid_threshold_bytes} traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths} routing_ecmp_then_source_routing_switch_threshold_bytes=${hybrid_threshold_bytes}"

echo "Increasing a2a fraction deployment (${flows_per_s}) finished."

# 840 servers (105x8, 168x5)
flows_per_s=750000
actservers=840
a2a_fraction_ft=0.825
a2a_fraction_xp=0.7778
runtime=`calc ${num_flows} / ${flows_per_s}`;

#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/full_fat_tree_k16.properties run_folder_name=15_pareto_a2a_fraction/full_fat_tree_k16_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_ft}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_vlb.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_vlb_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ecmp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ecmp_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 routing_ecmp_then_valiant_switch_threshold_bytes=${hybrid_threshold_bytes} traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths} routing_ecmp_then_source_routing_switch_threshold_bytes=${hybrid_threshold_bytes}"

echo "Increasing a2a fraction deployment (${flows_per_s}) finished."


# 960 servers (120x8, 192x5)
flows_per_s=750000
actservers=960
a2a_fraction_ft=0.94
a2a_fraction_xp=0.8889
runtime=`calc ${num_flows} / ${flows_per_s}`;

#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/full_fat_tree_k16.properties run_folder_name=15_pareto_a2a_fraction/full_fat_tree_k16_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_ft}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_vlb.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_vlb_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ecmp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ecmp_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 routing_ecmp_then_valiant_switch_threshold_bytes=${hybrid_threshold_bytes} traffic_probabilities_active_fraction=${a2a_fraction_xp}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths}"
#ssh user@machine.com "cd /path/to/folder/netbench; screen -d -m ../java/jre1.8.0_131/bin/java -ea -jar NetBench.jar private/runs/3_4_all_to_all_fraction/xpander_n216_d11_hybrid_ksp.properties run_folder_name=15_pareto_a2a_fraction/xpander_n216_d11_hybrid_ksp_${k_for_k_shortest_paths}_actservers_${actservers}_flows_${flows_per_s}_runtime_${runtime}s_ecn_threshold_${ecn_threshold}_intermediary_${intermediary}_flowlet_gap_${FLOWLET_GAP_NS} output_port_ecn_threshold_k_bytes=${ecn_threshold} traffic_lambda_flow_starts_per_s=${flows_per_s} run_time_s=${runtime} network_device_intermediary=${intermediary} FLOWLET_GAP_NS=${FLOWLET_GAP_NS} traffic_flow_size_dist=${traffic_flow_size_dist} traffic_flow_size_dist_pareto_shape=1.05 traffic_flow_size_dist_pareto_mean_kilobytes=100 traffic_probabilities_active_fraction=${a2a_fraction_xp} k_for_k_shortest_paths=${k_for_k_shortest_paths} routing_ecmp_then_source_routing_switch_threshold_bytes=${hybrid_threshold_bytes}"

echo "Increasing a2a fraction deployment (${flows_per_s}) finished."


############################################################################################################################
############################################################################################################################
############################################################################################################################
